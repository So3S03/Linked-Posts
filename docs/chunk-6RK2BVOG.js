import{a as L}from"./chunk-PP3QN6IV.js";import{k as W}from"./chunk-RLNWFT3D.js";import{Ga as P,Ja as c,V as h,Xa as w,Y as C,Za as g,ab as S,d as F,eb as a,fb as o,fc as E,ga as d,gb as p,ha as l,hb as b,hc as B,ib as u,jb as f,lc as D,mb as v,nb as A,ob as x,pb as m,rc as T,tb as I,ub as k,uc as O,vb as M,wb as V}from"./chunk-KODTIHXY.js";var _=F(O());var Q=["closeBtn"];function j(r,N){if(r&1){let e=b();a(0,"div",10),p(1,"img",16),o(),a(2,"button",17),u("click",function(){d(e);let i=f();return l(i.deletePhoto())}),m(3,"Delete Photo"),o()}if(r&2){let e=f();c(),g("src",e.imagePath,P)}}var K=(()=>{class r{constructor(){this._AuthenticationService=h(L),this._PostService=h(W)}holdImage(e){this.ImageInput=e.target,this.ImageInput.files&&this.ImageInput.files.length>0&&(this.image=this.ImageInput.files[0],this.imagePath=URL.createObjectURL(this.image))}addPost(){let e=new FormData;this.postContent&&e.append("body",this.postContent),this.image!==null&&e.append("image",this.image),(this.postContent||this.image)&&this._PostService.createPost(e).subscribe({next:t=>{_.default.fire({title:"Done!",text:"Your post has been added successfuly!",icon:"success"}),this.postContent="",this.ImageInput&&(this.ImageInput.value=""),this.ModalCloseBtn.nativeElement.click()},error:t=>{console.log(t),_.default.fire({icon:"error",title:"Oops...",text:"Something went wrong!"})}})}deletePhoto(){this.imagePath="",this.image=null}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275cmp=C({type:r,selectors:[["app-add-post-section"]],viewQuery:function(t,i){if(t&1&&v(Q,5),t&2){let n;A(n=x())&&(i.ModalCloseBtn=n.first)}},standalone:!0,features:[V],decls:21,vars:3,consts:[["closeBtn",""],[1,"bg-body","shadow-sm","p-4","rounded-3"],["readonly","","type","text","data-bs-toggle","modal","data-bs-target","#staticBackdropAddPost",1,"form-control","rounded-5","w-95","mx-auto",3,"placeholder"],["id","staticBackdropAddPost","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-md"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mb-3"],["placeholder","Write your thoughts here...","rows","3",1,"form-control","border-dashed","bg-secondary-subtle","border-secondary",3,"ngModelChange","ngModel"],["type","file","placeholder","Choose Photo",1,"form-control","border-dashed","bg-secondary-subtle","border-secondary",3,"change"],[1,"modal-footer","justify-content-start"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-secondary"],["alt","",1,"w-100",3,"src"],[1,"btn","btn-danger","w-100",3,"click"]],template:function(t,i){if(t&1){let n=b();a(0,"div",1),p(1,"input",2),o(),a(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h1",7),m(7,"Add New Post"),o(),p(8,"button",8,0),o(),a(10,"div",9)(11,"div",10)(12,"textarea",11),M("ngModelChange",function(s){return d(n),k(i.postContent,s)||(i.postContent=s),l(s)}),o()(),a(13,"div",10)(14,"input",12),u("change",function(s){return d(n),l(i.holdImage(s))}),o()(),w(15,j,4,1),o(),a(16,"div",13)(17,"button",14),u("click",function(){return d(n),l(i.addPost())}),m(18,"Post"),o(),a(19,"button",15),m(20,"Close"),o()()()()()}if(t&2){let n;c(),g("placeholder","What is in your mind, "+((n=i._AuthenticationService.userData())==null||n.name==null?null:n.name.split(" ",1))),c(11),I("ngModel",i.postContent),c(3),S(15,i.imagePath?15:-1)}},dependencies:[T,E,B,D],styles:[".border-dashed[_ngcontent-%COMP%]{border:.0625rem dashed}.hide[_ngcontent-%COMP%]{display:none!important}"]})}}return r})();export{K as a};
