import{a as B}from"./chunk-6RK2BVOG.js";import{a as j,b as O,c as $,d as V}from"./chunk-H7AJ2Q5P.js";import{a as k}from"./chunk-PP3QN6IV.js";import{k as F}from"./chunk-RLNWFT3D.js";import{Ga as A,Ja as r,Sa as C,V as u,Xa as f,Y as U,Za as d,ab as v,cb as h,db as b,eb as n,fb as o,ga as I,gb as m,ha as T,hb as D,ib as P,jb as _,pb as a,qb as x,rb as S,wb as M}from"./chunk-KODTIHXY.js";var L=(t,s)=>s._id;function Y(t,s){if(t&1&&m(0,"app-comments",20),t&2){let e=_().$implicit;d("Comment",e.comments[0])}}function z(t,s){if(t&1){let e=D();n(0,"div",24),m(1,"app-post",25),n(2,"div",26)(3,"a",27),P("click",function(){let i=I(e).$implicit,c=_(2);return T(c.showComments(i.id))}),a(4,"show comments"),o()(),f(5,Y,1,1,"app-comments",20),m(6,"app-add-comment-section",28),o()}if(t&2){let e=s.$implicit;r(),d("post",e),r(4),v(5,e.comments.length>0?5:-1),r(),d("postId",e._id)}}function G(t,s){if(t&1&&h(0,z,7,3,"div",24,L),t&2){let e=_();b(e.userPosts())}}function H(t,s){t&1&&(n(0,"p",29),a(1,"You Have No Posts Yet"),o())}function N(t,s){if(t&1&&m(0,"app-comments",20),t&2){let e=s.$implicit;d("Comment",e)}}var oe=(()=>{class t{constructor(){this._PostService=u(F),this._CommentService=u(j),this._AuthenticationService=u(k),this.userPosts=C([]),this.postComments=C([])}ngOnInit(){this.userPostsSubscription=this._PostService.getUserPosts().subscribe({next:e=>{this.userPosts.set(e.posts.reverse())},error:e=>console.log(e)})}showComments(e){this.PostId=e,this.postsCommentsSubscription=this._CommentService.getPostComment(e).subscribe({next:l=>{this.postComments.set(l.comments)}})}updateComments(e){this.postComments.set(e)}ngOnDestroy(){this.userPostsSubscription.unsubscribe()}setSelectedCommentToUpdate(e){this.selectedCommentToUpdate=e}static{this.\u0275fac=function(l){return new(l||t)}}static{this.\u0275cmp=U({type:t,selectors:[["app-user-profile"]],standalone:!0,features:[M],decls:35,vars:8,consts:[[1,"mt-4"],[1,"col-lg-10","mx-auto"],[1,"w-100","cover-photo","overflow-hidden"],["src","./assets/Photos/static-personal-cover-photo.jpg","alt","coverPhoto",1,"w-100"],[1,"Personal-Info","w-100","p-3","mx-auto","row","shadow-sm"],[1,"d-flex","justify-content-around","align-items-center","col-md-5","mb-4"],[1,"Profile-Photo"],[1,"w-100","rounded-circle","border-secondary","border","border-3","object-fit-cover","h-100",3,"src","alt"],[1,"w-50","text-center"],[1,"mx-0"],[1,"m-0","p-0"],[1,"col-md-5","text-center","mb-4"],[1,"w-40","mx-auto","mt-3"],["id","mainCommentModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"Comment"],[1,"modal-footer"],[1,"w-100"],[3,"Comments","postId"],[1,"p-4","rounded-3","my-3","shadow-sm","bg-body"],[3,"post"],[1,"my-3","text-center"],["data-bs-toggle","modal","data-bs-target","#mainCommentModal",1,"link-primary","text-decoration-none","cursor-pointer",3,"click"],[3,"postId"],[1,"text-center","mt-3","alert","alert-warning","fs-3"]],template:function(l,i){if(l&1&&(n(0,"section",0)(1,"div",1)(2,"div",2),m(3,"img",3),o(),n(4,"div",4)(5,"div",5)(6,"div",6),m(7,"img",7),o(),n(8,"div",8)(9,"h3",9),a(10),o(),n(11,"p",10),a(12),o()()(),n(13,"div",11)(14,"h5",9),a(15),o(),n(16,"p",10),a(17),o()()()()(),n(18,"section",12),m(19,"app-add-post-section"),f(20,G,2,0)(21,H,2,0),o(),n(22,"div",13)(23,"div",14)(24,"div",15)(25,"div",16)(26,"h1",17),a(27,"Comments"),o(),m(28,"button",18),o(),n(29,"div",19),h(30,N,1,1,"app-comments",20,L),o(),n(32,"div",21)(33,"div",22)(34,"app-add-comment-section",23),P("Comments",function(p){return i.updateComments(p)}),o()()()()()()),l&2){let c,p,g,w,y,E;r(7),d("src",(c=i._AuthenticationService.userData())==null?null:c.photo,A)("alt",((p=i._AuthenticationService.userData())==null?null:p.name)+" Photo"),r(3),x((g=i._AuthenticationService.userData())==null?null:g.name),r(2),S("Gender: ",(w=i._AuthenticationService.userData())==null?null:w.gender,""),r(3),x((y=i._AuthenticationService.userData())==null?null:y.email),r(2),S("Birth date: ",(E=i._AuthenticationService.userData())==null?null:E.dateOfBirth,""),r(3),v(20,i.userPosts().length>0?20:21),r(10),b(i.postComments()),r(4),d("postId",i.PostId)}},dependencies:[B,O,V,$],styles:[".Personal-Info[_ngcontent-%COMP%]{direction:rtl;align-items:center;justify-content:space-between;background-color:var(--components-color);border-bottom-left-radius:30px;border-bottom-right-radius:30px}.Profile-Photo[_ngcontent-%COMP%]{width:200px;height:200px}"]})}}return t})();export{oe as UserProfileComponent};
