import{a as I}from"./chunk-PP3QN6IV.js";import{h as q,k as J}from"./chunk-RLNWFT3D.js";import{Ga as w,Ja as r,P as Y,V as f,Wb as V,Xa as C,Y as v,Za as x,ab as c,bc as R,d as B,eb as m,fb as o,fc as D,ga as d,gb as h,ha as p,hb as g,hc as U,ib as _,jb as l,lc as A,oa as $,pb as s,qb as u,rc as y,tb as O,tc as G,ub as T,uc as W,vb as E,wb as S,xb as H,yb as M,zb as P}from"./chunk-KODTIHXY.js";var j=(()=>{class e{constructor(){this._HttpClient=f(R),this.baseUrl=G.ApiBaseUrl}createComment(t){return this._HttpClient.post(`${this.baseUrl}comments`,t)}getPostComment(t){return this._HttpClient.get(`${this.baseUrl}posts/${t}/comments`)}updateComment(t,n){return this._HttpClient.put(`${this.baseUrl}comments/${t}`,{content:n})}deleteComment(t){return this._HttpClient.delete(`${this.baseUrl}comments/${t}`)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var b=B(W());function Q(e,a){e&1&&h(0,"img",4)}function X(e,a){if(e&1&&h(0,"img",11),e&2){let t=l(3);x("src",t.Comment.commentCreator.photo,w)("alt",t.Comment.commentCreator.name+" Photo")}}function Z(e,a){if(e&1){let t=g();m(0,"div",12)(1,"p",13),_("click",function(){d(t);let i=l(4);return p(i.getOldComment())})("click",function(){d(t);let i=l(4);return i.isCommentOptMenuCollapsed=!1,p(i.isUpdateComment=!0)}),s(2,"Update Comment"),o(),m(3,"p",14),_("click",function(){d(t);let i=l(4);return p(i.deleteComment(i.Comment._id))}),s(4,"Delete Comment"),o()()}}function tt(e,a){if(e&1&&C(0,Z,5,0,"div",12),e&2){let t=l(3);c(0,t.isCommentOptMenuCollapsed?0:-1)}}function et(e,a){e&1&&(m(0,"div",12)(1,"p"),s(2,"N/A"),o()())}function nt(e,a){if(e&1&&C(0,et,3,0,"div",12),e&2){let t=l(3);c(0,t.isCommentOptMenuCollapsed?0:-1)}}function it(e,a){if(e&1&&(m(0,"p",10),s(1),o()),e&2){let t=l(3);r(),u(t.Comment.content)}}function ot(e,a){e&1&&(m(0,"p",10),s(1,"comment doesn't exist "),m(2,"span",15),s(3,"back-end problem"),o()())}function mt(e,a){if(e&1){let t=g();m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(4,Q,1,0,"img",4)(5,X,1,2),o(),m(6,"div",5)(7,"p",6),s(8),o(),m(9,"p",7),s(10),M(11,"date"),o()()(),m(12,"div",8)(13,"i",9),_("click",function(){d(t);let i=l(2);return p(i.CommentOptMenuCollapse())}),o(),C(14,tt,1,1)(15,nt,1,1),o()(),C(16,it,2,1,"p",10)(17,ot,4,0),o()}if(e&2){let t,n=l(2);r(4),c(4,n.Comment.commentCreator.photo.includes("undefined")||!n.Comment.commentCreator.photo?4:5),r(4),u(n.Comment.commentCreator.name),r(2),u(P(11,5,n.Comment.createdAt)),r(4),c(14,n.Comment.commentCreator._id==((t=n._AuthenticationService.userData())==null?null:t._id)?14:15),r(2),c(16,n.Comment.content?16:17)}}function lt(e,a){e&1&&h(0,"img",4)}function rt(e,a){if(e&1&&h(0,"img",11),e&2){let t=l(3);x("src",t.Comment.commentCreator.photo,w)("alt",t.Comment.commentCreator.name+" Photo")}}function st(e,a){if(e&1){let t=g();m(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),C(4,lt,1,0,"img",4)(5,rt,1,2),o(),m(6,"div",5)(7,"p",6),s(8),o(),m(9,"p",7),s(10),M(11,"date"),o()()(),m(12,"i",16),_("click",function(){d(t);let i=l(2);return p(i.isUpdateComment=!1)}),o()(),m(13,"p",10),s(14),o(),m(15,"div",17)(16,"div",18)(17,"textarea",19),E("ngModelChange",function(i){d(t);let k=l(2);return T(k.commentContent,i)||(k.commentContent=i),p(i)}),o()(),m(18,"div",20)(19,"i",21),_("click",function(){d(t);let i=l(2);return p(i.updateComment(i.Comment._id))}),o()()()()}if(e&2){let t=l(2);r(4),c(4,t.Comment.commentCreator.photo.includes("undefined")||!t.Comment.commentCreator.photo?4:5),r(4),u(t.Comment.commentCreator.name),r(2),u(P(11,5,t.Comment.createdAt)),r(4),u(t.commentContent),r(3),O("ngModel",t.commentContent)}}function at(e,a){if(e&1&&C(0,mt,18,7,"div",0)(1,st,20,7,"div",0),e&2){let t=l();c(0,t.isUpdateComment?-1:0),r(),c(1,t.isUpdateComment?1:-1)}}var Tt=(()=>{class e{constructor(){this.isCommentOptMenuCollapsed=!1,this._AuthenticationService=f(I),this._CommentService=f(j),this.isUpdateComment=!1}CommentOptMenuCollapse(){this.isCommentOptMenuCollapsed?this.isCommentOptMenuCollapsed=!1:this.isCommentOptMenuCollapsed=!0}deleteComment(t){this._CommentService.deleteComment(t).subscribe({next:n=>{console.log(n),b.default.fire({title:"Done!",text:"You have deleted this Comment!",icon:"success"}),this.isCommentOptMenuCollapsed=!1},error:n=>{console.log(n),b.default.fire({icon:"error",title:"Oops...",text:"Something went wrong deleteing this comment!"}),this.isCommentOptMenuCollapsed=!1}})}getOldComment(){this.commentContent=this.Comment.content?this.Comment.content:"There were no comment here"}updateComment(t){this.commentContent&&this._CommentService.updateComment(t,this.commentContent).subscribe({next:n=>{b.default.fire({title:"Done!",text:"You have updated this Comment!",icon:"success"}),this.Comment=n.comment,this.isCommentOptMenuCollapsed=!1,this.isUpdateComment=!1,this.commentContent=""},error:n=>{console.log(n),b.default.fire({icon:"error",title:"Oops...",text:"Something went wrong updating this comment!"}),this.isCommentOptMenuCollapsed=!1}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-comments"]],inputs:{Comment:"Comment"},standalone:!0,features:[S],decls:1,vars:1,consts:[[1,"my-2","p-3","bg-body-tertiary","border","rounded-2"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"d-flex","align-items-center","justify-content-start"],[1,"Photo","me-3"],["src","../assets/Photos/profile.png","alt","",1,"w-100","rounded-circle"],[1,"d-flex","justify-content-start"],[1,"fw-bold","m-0","fs-small","me-2"],[1,"m-0","fs-small"],[1,"position-relative"],[1,"fa-solid","fa-ellipsis","fs-5","cursor-pointer",3,"click"],[1,"fs-small"],[1,"w-100","rounded-circle",3,"src","alt"],[1,"comment-Opt-Menu","rounded-2"],[1,"cursor-pointer",3,"click"],[1,"m-0","cursor-pointer","text-danger",3,"click"],[1,"text-danger"],[1,"fa-solid","fa-circle-xmark","text-primary","fs-5","cursor-pointer",3,"click"],[1,"row"],[1,"col-11"],["placeholder","Write your thoughts here...","rows","3",1,"form-control","border-dashed","bg-secondary-subtle","border-secondary","col-11",3,"ngModelChange","ngModel"],[1,"col-1","d-flex","justify-content-end","align-items-center"],[1,"fa-solid","fa-paper-plane","fa-lg","text-primary","cursor-pointer",3,"click"]],template:function(n,i){n&1&&C(0,at,2,2),n&2&&c(0,i.Comment?0:-1)},dependencies:[V,y,D,U,A],styles:[".comment-Opt-Menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:-10%;width:150px;background-color:#bdbdbd;text-align:center;padding:5px}"]})}}return e})();var z=B(W());var ct=e=>["/PostDetailes",e],dt=e=>["/UpdatePost",e];function pt(e,a){if(e&1){let t=g();m(0,"p",11),_("click",function(){d(t);let i=l(3);return p(i.isPostOptionMenuCollapsed=!1)}),s(1,"Update Post"),o(),m(2,"p",12),_("click",function(){d(t);let i=l(3);return p(i.deletePost(i.post._id))})("click",function(){d(t);let i=l(3);return p(i.isPostOptionMenuCollapsed=!1)}),s(3,"Delete Post"),o()}if(e&2){let t=l(3);x("routerLink",H(1,dt,t.post._id))}}function Ct(e,a){if(e&1){let t=g();m(0,"div",8)(1,"p",11),_("click",function(){d(t);let i=l(2);return p(i.isPostOptionMenuCollapsed=!1)}),s(2,"Post Details"),o(),C(3,pt,4,3),o()}if(e&2){let t,n=l(2);r(),x("routerLink",H(2,ct,n.post._id)),r(2),c(3,n.post.user._id===((t=n._AuthenticationService.userData())==null?null:t._id)?3:-1)}}function _t(e,a){if(e&1&&(m(0,"p",9),s(1),o()),e&2){let t=l(2);r(),u(t.post.body)}}function ut(e,a){if(e&1&&(m(0,"div",10),h(1,"img",13),o()),e&2){let t=l(2);r(),x("src",t.post.image,w)}}function ft(e,a){if(e&1){let t=g();m(0,"div",0)(1,"div",1)(2,"div",2),h(3,"img",3),o(),m(4,"div")(5,"p",4),s(6),o(),m(7,"p",5),s(8),M(9,"date"),o()()(),m(10,"div",6)(11,"i",7),_("click",function(){d(t);let i=l();return p(i.postOptMenuCollapse())}),o(),C(12,Ct,4,4,"div",8),o()(),C(13,_t,2,1,"p",9)(14,ut,2,1,"div",10)}if(e&2){let t=l();r(3),x("src",t.post.user.photo,w)("alt",t.post.user.name+" Photo"),r(3),u(t.post.user.name),r(2),u(P(9,7,t.post.createdAt)),r(4),c(12,t.isPostOptionMenuCollapsed?12:-1),r(),c(13,t.post.body?13:-1),r(),c(14,t.post.image?14:-1)}}var Ht=(()=>{class e{constructor(){this._AuthenticationService=f(I),this._PostService=f(J),this.isPostOptionMenuCollapsed=!1}postOptMenuCollapse(){this.isPostOptionMenuCollapsed?this.isPostOptionMenuCollapsed=!1:this.isPostOptionMenuCollapsed=!0}deletePost(t){this._PostService.deletePost(t).subscribe({next:n=>{console.log(n),z.default.fire({title:"Done!",text:"Post has deleted Successfuly !",icon:"success"}),this.isPostOptionMenuCollapsed=!1},error:n=>{console.log(n),z.default.fire({icon:"error",title:"Oops...",text:"Something went wrong while deleting this post!"}),this.isPostOptionMenuCollapsed=!1}})}ngOnDestroy(){this.isPostOptionMenuCollapsed=!1}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-post"]],inputs:{post:"post"},standalone:!0,features:[S],decls:1,vars:1,consts:[[1,"d-flex","align-items-center","justify-content-between"],[1,"d-flex","align-items-center","justify-content-start"],[1,"Photo","me-3"],[1,"w-100","rounded-circle","object-fit-cover","h-100",3,"src","alt"],[1,"fw-bold","m-0","fs-small"],[1,"m-0","fs-small"],[1,"position-relative"],[1,"fa-solid","fa-ellipsis","fs-5","cursor-pointer",3,"click"],[1,"Post-Option-Menu","rounded-3"],[1,"py-2"],[1,"Content-Photo","my-2"],[1,"cursor-pointer",3,"click","routerLink"],[1,"m-0","cursor-pointer","text-danger",3,"click"],["alt","Content Photo",1,"w-100","rounded-3",3,"src"]],template:function(n,i){n&1&&C(0,ft,15,9),n&2&&c(0,i.post?0:-1)},dependencies:[V,y,q],styles:[".Post-Option-Menu[_ngcontent-%COMP%]{position:absolute;top:100%;right:-10%;width:150px;background-color:#bdbdbd;text-align:center;padding:5px}"]})}}return e})();var N=B(W());var qt=(()=>{class e{constructor(){this._CommentService=f(j),this.Comments=new $}addComment(t){let n={content:this.commentContent,post:t};this._CommentService.createComment(n).subscribe({next:i=>{this.commentContent="",N.default.fire({title:"Done!",text:"Your Comment Has Been Added Successfuly",icon:"success"}),this.Comments.emit(i.comments)},error:i=>{N.default.fire({icon:"error",title:"Oops...",text:"Something went wrong adding this comment!"}),console.log(i)}})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=v({type:e,selectors:[["app-add-comment-section"]],inputs:{postId:"postId"},outputs:{Comments:"Comments"},standalone:!0,features:[S],decls:5,vars:1,consts:[[1,"p-3","bg-body-tertiary","border","rounded-2","d-flex","justify-content-between"],[1,"col-11"],["rows","1","placeholder","write comment",1,"form-control","rounded-3","resize-none",3,"ngModelChange","ngModel"],[1,"col-1","d-flex","justify-content-end","align-items-center"],[1,"fa-solid","fa-paper-plane","fa-lg","text-primary","cursor-pointer",3,"click"]],template:function(n,i){n&1&&(m(0,"div",0)(1,"div",1)(2,"textarea",2),E("ngModelChange",function(F){return T(i.commentContent,F)||(i.commentContent=F),F}),o()(),m(3,"div",3)(4,"i",4),_("click",function(){return i.addComment(i.postId)}),o()()()),n&2&&(r(2),O("ngModel",i.commentContent))},dependencies:[y,D,U,A]})}}return e})();export{j as a,Tt as b,Ht as c,qt as d};
